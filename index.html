<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">

<meta name="viewport"
content="
width=device-width,
height=device-height,
initial-scale=1.0,
maximum-scale=1.0,
minimum-scale=1.0,
user-scalable=no,
viewport-fit=cover
">

<meta name="theme-color" content="#000000">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta name="renderer" content="webkit">
<meta name="force-rendering" content="webkit">

<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Kuromi Engine</title>

<link rel="preload"
href="src/main.js"
as="script"
crossorigin="anonymous"
>

<link rel="modulepreload"
href="src/core/Engine.js"
>

<link rel="modulepreload"
href="src/renderer/Renderer.js"
>

<link rel="modulepreload"
href="src/scene/SceneManager.js"
>

<link rel="modulepreload"
href="src/camera/CameraSystem.js"
>

<link rel="modulepreload"
href="src/systems/PerformanceMonitor.js"
>

<link rel="modulepreload"
href="src/systems/PerformanceScaler.js"
>

<link rel="stylesheet"
href="styles.css"
>

<style>

html,body{
margin:0;
padding:0;
width:100%;
height:100%;
overflow:hidden;
background:#000;
touch-action:none;
overscroll-behavior:none;
}

#kuromi-engine-canvas{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
display:block;
outline:none;
}

</style>

</head>

<body>

<canvas
id="kuromi-engine-canvas"
tabindex="-1"
></canvas>

<script type="module">

import boot from './src/main.js'

function safeBoot(){

if(document.visibilityState==='hidden'){

const onVisible=()=>{
document.removeEventListener('visibilitychange',onVisible)
boot.boot()
}

document.addEventListener(
'visibilitychange',
onVisible,
{once:true}
)

}else{

boot.boot()

}

}

if(document.readyState==='loading'){

document.addEventListener(
'DOMContentLoaded',
safeBoot,
{once:true}
)

}else{

safeBoot()

}

</script>

</body>
</html>
